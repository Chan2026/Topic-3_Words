<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é©¬æ¥è¯­-ä¸­æ–‡è¯æ±‡å­¦ä¹ ä¼´ä¾£</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #fdfbf7; /* Warm paper background */
            color: #4a4a4a;
        }
        .card-flip {
            perspective: 1000px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        .card-flip.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0.75rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .card-front {
            background-color: #ffffff;
            border: 2px solid #f3f4f6;
        }
        .card-back {
            background-color: #fffbeb; /* Amber-50 */
            transform: rotateY(180deg);
            border: 2px solid #fcd34d;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            height: 300px;
        }
        .nav-active {
            border-bottom: 3px solid #d97706; /* Amber-600 */
            color: #d97706;
            font-weight: 700;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <!-- Chosen Palette: Warm Paper & Amber. Background #fdfbf7, Accents Amber/Emerald. Designed for a calm, reading-focused environment. -->
    <!-- Application Structure Plan: 
         1. Header: Simple navigation (Learn, Quiz, Progress).
         2. Learning Mode (Flashcards): Grid of interactive cards. Front is the Chinese word (focus), Back is the Definition + Malay auxiliary.
         3. Quiz Mode: Interactive MCQ based on the provided JSON data. Includes a results view with a Chart.js visualization.
         4. Match Mode: A simple column matching game to reinforce connections.
         Rationale: This structure separates the "Input" (Learning) from the "Output" (Quiz/Match), allowing students to study first and then test themselves.
    -->
    <!-- Visualization & Content Choices:
         1. Flashcards: HTML/CSS 3D transform. Goal: Memorization.
         2. Quiz Result Chart: Chart.js Doughnut. Goal: Visual feedback on performance.
         3. Progress Bar: HTML/CSS. Goal: Motivation.
         4. Content: Derived strictly from the user's vocabulary list and quiz data.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-amber-600 tracking-wider">è¯æ±‡ä¼´ä¾£</span>
                </div>
                <div class="flex space-x-8">
                    <button onclick="switchTab('learn')" id="nav-learn" class="nav-active inline-flex items-center px-1 pt-1 text-sm font-medium transition-colors hover:text-amber-600">
                        è¯å¡å­¦ä¹ 
                    </button>
                    <button onclick="switchTab('quiz')" id="nav-quiz" class="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 transition-colors hover:text-amber-600">
                        æŒ‘æˆ˜æµ‹è¯•
                    </button>
                    <button onclick="switchTab('match')" id="nav-match" class="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 transition-colors hover:text-amber-600">
                        è¿çº¿æ¸¸æˆ
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- Intro Section (Context) -->
        <div class="mb-8 text-center max-w-2xl mx-auto">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">æŒæ¡åŒè¯­è¯æ±‡</h1>
            <p class="text-gray-600">
                æœ¬åº”ç”¨æ—¨åœ¨å¸®åŠ©å­¦ç”Ÿæ·±åº¦ç†è§£ä¸­æ–‡è¯æ±‡å«ä¹‰ï¼Œè¾…ä»¥é©¬æ¥è¯­ç¿»è¯‘ã€‚
                <br>ç‚¹å‡»ä¸‹æ–¹æ¨¡å¼åˆ‡æ¢å­¦ä¹ ã€æµ‹è¯•æˆ–æ¸¸æˆã€‚
            </p>
        </div>

        <!-- VIEW: LEARNING (Flashcards) -->
        <section id="view-learn" class="fade-in space-y-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-gray-800 border-l-4 border-amber-500 pl-3">æ ¸å¿ƒè¯æ±‡å¡ç‰‡</h2>
                <div class="text-sm text-gray-500">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦ç»†è§£é‡Š</div>
            </div>

            <!-- Context for this section -->
            <p class="text-gray-600 mb-6 bg-white p-4 rounded-lg shadow-sm">
                è¿™é‡ŒåŒ…å«äº†ä½ éœ€è¦æŒæ¡çš„10ä¸ªé‡ç‚¹è¯æ±‡ã€‚å¡ç‰‡æ­£é¢æ˜¯ä¸­æ–‡è¯è¯­ï¼ŒèƒŒé¢æä¾›äº†<strong>è¯¦ç»†çš„ä¸­æ–‡è§£é‡Š</strong>ã€ä¾‹å¥ä»¥åŠä½œä¸ºè¾…åŠ©çš„é©¬æ¥è¯­ç¿»è¯‘ã€‚è¯·å¤§å£°æœ—è¯»å¹¶å°è¯•é€ å¥ã€‚
            </p>

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="flashcard-grid">
                <!-- Cards injected by JS -->
            </div>
        </section>

        <!-- VIEW: QUIZ -->
        <section id="view-quiz" class="hidden fade-in">
            <div class="max-w-3xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800 border-l-4 border-blue-500 pl-3">è¯­å¢ƒç†è§£æµ‹è¯•</h2>
                    <span id="quiz-progress" class="text-sm font-semibold text-blue-600">é¢˜ç›® 1 / 10</span>
                </div>

                <p class="text-gray-600 mb-6 bg-white p-4 rounded-lg shadow-sm">
                    é€šè¿‡é€‰æ‹©é¢˜æ¥æ£€éªŒä½ çš„å­¦ä¹ æˆæœã€‚è¿™äº›é¢˜ç›®é‡ç‚¹è€ƒå¯Ÿä½ å¯¹è¯è¯­åœ¨å…·ä½“å¥å­ä¸­ç”¨æ³•çš„ç†è§£ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¿»è¯‘ã€‚
                </p>

                <!-- Quiz Card -->
                <div id="quiz-card" class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100">
                    <div class="p-8">
                        <div id="quiz-question" class="text-lg font-medium text-gray-900 mb-6">é¢˜ç›®åŠ è½½ä¸­...</div>
                        <div id="quiz-options" class="space-y-3">
                            <!-- Options injected by JS -->
                        </div>
                    </div>
                    <div id="quiz-feedback" class="hidden px-8 py-4 bg-gray-50 border-t border-gray-100">
                        <div id="feedback-content" class="text-sm"></div>
                        <button onclick="nextQuestion()" class="mt-4 w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors font-semibold">
                            ä¸‹ä¸€é¢˜
                        </button>
                    </div>
                </div>

                <!-- Results View -->
                <div id="quiz-results" class="hidden bg-white rounded-xl shadow-lg p-8 text-center">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">æµ‹è¯•å®Œæˆï¼</h3>
                    <div class="chart-container mb-6">
                        <canvas id="resultsChart"></canvas>
                    </div>
                    <p id="score-text" class="text-xl text-gray-700 mb-6">å¾—åˆ†ï¼š80/100</p>
                    <button onclick="resetQuiz()" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-amber-600 hover:bg-amber-700 focus:outline-none">
                        é‡æ–°æŒ‘æˆ˜
                    </button>
                </div>
            </div>
        </section>

        <!-- VIEW: MATCHING GAME -->
        <section id="view-match" class="hidden fade-in">
             <div class="max-w-4xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800 border-l-4 border-emerald-500 pl-3">è¿è¿çœ‹ï¼šè¯è¯­é…å¯¹</h2>
                    <span id="match-score" class="text-sm font-semibold text-emerald-600">åŒ¹é…ç»„æ•°ï¼š0 / 5</span>
                </div>

                <p class="text-gray-600 mb-6 bg-white p-4 rounded-lg shadow-sm">
                    ç‚¹å‡»å·¦ä¾§çš„ä¸­æ–‡è¯è¯­ï¼Œç„¶åç‚¹å‡»å³ä¾§å¯¹åº”çš„é©¬æ¥è¯­/è§£é‡Šè¿›è¡Œé…å¯¹ã€‚è¿™æ˜¯å¼ºåŒ–è®°å¿†çš„å¿«é€Ÿç»ƒä¹ ã€‚
                </p>

                <div class="grid grid-cols-2 gap-8 md:gap-16" id="match-game-area">
                    <div id="col-left" class="space-y-4">
                        <!-- Left items -->
                    </div>
                    <div id="col-right" class="space-y-4">
                        <!-- Right items -->
                    </div>
                </div>
                
                <div id="match-success" class="hidden mt-8 text-center p-6 bg-emerald-50 rounded-lg border border-emerald-200 text-emerald-800">
                    <h3 class="text-lg font-bold">æ­å–œï¼å…¨éƒ¨åŒ¹é…æˆåŠŸï¼</h3>
                    <button onclick="initMatchGame()" class="mt-4 px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700">å†ç©ä¸€æ¬¡</button>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-gray-200 mt-auto">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center">
            <p class="text-sm text-gray-500">è¯æ±‡å­¦ä¹ ä¼´ä¾£ Â© 2026</p>
            <div class="text-xs text-gray-400">Designed for Learning</div>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const vocabData = [
            { id: 1, zh: "æ»‹å‘³", ms: "Rasa", desc: "é£Ÿç‰©çš„å‘³é“ï¼Œæˆ–æ˜¯å†…å¿ƒçš„æŸç§æ„Ÿå—ã€‚", hint: "é…¸ç”œè‹¦è¾£" },
            { id: 2, zh: "å¿™ç¢Œ", ms: "Sibuk", desc: "äº‹æƒ…å¤šï¼Œæ²¡æœ‰ç©ºé—²æ—¶é—´ã€‚", hint: "ä¸åœå·¥ä½œ" },
            { id: 3, zh: "ä»“åº“", ms: "Gudang", desc: "ä¸“é—¨å­˜æ”¾å¤§é‡è´§ç‰©çš„åœ°æ–¹ã€‚", hint: "å‚¨è—å®¤" },
            { id: 4, zh: "è£¹", ms: "Balut", desc: "ç”¨çº¸ã€å¸ƒç­‰åŒ…æ‰æˆ–ç¼ ç»•ã€‚", hint: "åŒ…ä¼¤å£" },
            { id: 5, zh: "ä¸¥å‰", ms: "Tegas", desc: "ä¸¥è‚ƒè€Œå‰å®³ï¼Œä¸éšä¾¿ã€‚", hint: "è€å¸ˆ/çˆ¶äº²" },
            { id: 6, zh: "ä»æ…ˆ", ms: "Penyayang", desc: "ä»çˆ±æ…ˆå–„ï¼Œå……æ»¡çˆ±å¿ƒã€‚", hint: "æ¸©æŸ”å–„è‰¯" },
            { id: 7, zh: "é¼“åŠ±", ms: "Dorongan", desc: "æ¿€å‘å‹‰åŠ±ï¼Œç»™äººåŠ¨åŠ›ã€‚", hint: "åŠ æ²¹æ‰“æ°”" },
            { id: 8, zh: "æ„Ÿå¹", ms: "Mengeluh", desc: "æœ‰æ‰€æ„Ÿè§¦è€Œå¹æ¯ï¼ˆæ³¨æ„ï¼šé©¬æ¥æ–‡Mengeluhåå‘æŠ±æ€¨/å¹æ°”ï¼‰ã€‚", hint: "å‘è‡ªå†…å¿ƒçš„å¹æ¯" },
            { id: 9, zh: "æ¼‚æ³Š", ms: "Merantau", desc: "ç¦»å¼€å®¶ä¹¡ï¼Œåˆ°å¤–åœ°ç”Ÿæ´»æˆ–æµæµªã€‚", hint: "èƒŒäº•ç¦»ä¹¡" },
            { id: 10, zh: "æœŸç›¼", ms: "Mengharapkan", desc: "æœŸå¾…ï¼Œç›¼æœ›ã€‚", hint: "å¸Œæœ›å‘ç”Ÿ" },
            { id: 11, zh: "æ’ä¹…", ms: "Abadi", desc: "æ°¸æ’ï¼Œé•¿ä¹…ä¸å˜ã€‚", hint: "å¤©é•¿åœ°ä¹…" },
            { id: 12, zh: "ä¼¼", ms: "Macam", desc: "åƒï¼Œå¦‚åŒã€‚", hint: "æ¯”å–»å¥" }
        ];

        // Quiz Data from previous turn context
        const quizData = [
            {
                id: 1,
                question: "â€œæ»‹å‘³ (Rasa)â€ åœ¨ä¸­æ–‡é‡Œæœ€å‡†ç¡®çš„è§£é‡Šæ˜¯ä»€ä¹ˆï¼Ÿ",
                options: [
                    { text: "é£Ÿç‰©çš„å‘³é“ï¼Œæˆ–æ˜¯å†…å¿ƒçš„æŸç§æ„Ÿå—", correct: true, feedback: "æ­£ç¡®ï¼â€œæ»‹å‘³â€æ—¢æŒ‡å‘³è§‰ï¼Œä¹ŸæŒ‡å¿ƒç†æ„Ÿå—ã€‚" },
                    { text: "å½¢å®¹ä¸€ä¸ªäººéå¸¸å‹¤åŠ³ï¼Œæ²¡æœ‰ä¼‘æ¯", correct: false, feedback: "ä¸å¯¹ï¼Œè¿™æ˜¯â€œå¿™ç¢Œâ€çš„æ„æ€ã€‚" },
                    { text: "å­˜æ”¾å¾ˆå¤šè´§ç‰©çš„æˆ¿å­", correct: false, feedback: "ä¸å¯¹ï¼Œè¿™æ˜¯â€œä»“åº“â€çš„æ„æ€ã€‚" }
                ]
            },
            {
                id: 2,
                question: "å½“æˆ‘ä»¬è¦å½¢å®¹ä¸€ä¸ªäººåšäº‹å¾ˆè®¤çœŸã€ä¸æ”¾æ¾ï¼Œç”šè‡³è®©äººæœ‰ç‚¹å®³æ€•æ—¶ï¼Œå¯ä»¥ç”¨å“ªä¸ªè¯ï¼Ÿ",
                options: [
                    { text: "ä»æ…ˆ (Penyayang)", correct: false, feedback: "ä»æ…ˆæ˜¯æ¸©æŸ”çš„ï¼Œä¸ä¼šè®©äººå®³æ€•ã€‚" },
                    { text: "ä¸¥å‰ (Tegas)", correct: true, feedback: "æ­£ç¡®ï¼ä¸¥å‰è¡¨ç¤ºä¸¥æ ¼ã€ä¸¥è‚ƒã€‚" },
                    { text: "æ„Ÿå¹ (Mengeluh)", correct: false, feedback: "æ„Ÿå¹æ˜¯æƒ…ç»ªè¡¨è¾¾ã€‚" }
                ]
            },
            {
                id: 3,
                question: "â€œä»æ…ˆ (Penyayang)â€ çš„ä¸­æ–‡æ„æ€æ˜¯æŒ‡ä¸€ä¸ªäººï¼š",
                options: [
                    { text: "ç¦»å¼€å®¶ä¹¡åˆ°å¾ˆè¿œçš„åœ°æ–¹ç”Ÿæ´»", correct: false, feedback: "è¿™æ˜¯â€œæ¼‚æ³Šâ€ã€‚" },
                    { text: "åƒæŸç§ä¸œè¥¿ä¸€æ ·", correct: false, feedback: "è¿™æ˜¯â€œä¼¼â€ã€‚" },
                    { text: "å¿ƒè‚ å¥½ï¼Œå¯¹äººæˆ–åŠ¨ç‰©å……æ»¡çˆ±å¿ƒ", correct: true, feedback: "æ­£ç¡®ï¼ä»æ…ˆå³æ˜¯å……æ»¡çˆ±å¿ƒã€‚" }
                ]
            },
            {
                id: 4,
                question: "â€œä»“åº“ (Gudang)â€ åœ¨ç”Ÿæ´»ä¸­çš„ä½œç”¨æ˜¯ï¼š",
                options: [
                    { text: "ç»™åˆ«äººæ”¯æŒï¼Œè®©ä»–ä»¬æœ‰åŠ¨åŠ›å‰è¿›", correct: false, feedback: "è¿™æ˜¯â€œé¼“åŠ±â€ã€‚" },
                    { text: "ä¸“é—¨ç”¨æ¥å‚¨è—å¤§æ‰¹è´§ç‰©æˆ–ç‰©èµ„çš„æˆ¿å±‹", correct: true, feedback: "æ­£ç¡®ï¼ä»“åº“ç”¨äºå‚¨ç‰©ã€‚" },
                    { text: "è¡¨è¾¾å†…å¿ƒçš„å¸Œæœ›å’Œç­‰å€™", correct: false, feedback: "è¿™æ˜¯â€œæœŸç›¼â€ã€‚" }
                ]
            },
            {
                id: 5,
                question: "å¦‚æœä½ å—ä¼¤äº†ï¼ŒåŒ»ç”Ÿç”¨çº±å¸ƒæŠŠä¼¤å£â€œåŒ…èµ·æ¥â€ï¼Œè¿™ä¸ªåŠ¨ä½œå¯¹åº”ï¼š",
                options: [
                    { text: "æ’ä¹… (Abadi)", correct: false, feedback: "æ’ä¹…æ˜¯å½¢å®¹è¯ã€‚" },
                    { text: "è£¹ (Balut)", correct: true, feedback: "æ­£ç¡®ï¼è£¹æ„å‘³ç€åŒ…æ‰ã€‚" },
                    { text: "å¿™ç¢Œ (Sibuk)", correct: false, feedback: "å¿™ç¢Œæ— å…³åŠ¨ä½œã€‚" }
                ]
            },
            {
                id: 6,
                question: "â€œæ¼‚æ³Š (Merantau)â€ æœ€é€‚åˆç”¨æ¥å½¢å®¹ä¸‹åˆ—å“ªç§æƒ…å†µï¼Ÿ",
                options: [
                    { text: "ä¸€ä¸ªäººç¦»å¼€å®¶ä¹¡ï¼Œåœ¨å¤–é¢å¥”æ³¢ç”Ÿæ´»", correct: true, feedback: "æ­£ç¡®ï¼æ¼‚æ³Šå³å¼‚ä¹¡ç”Ÿæ´»ã€‚" },
                    { text: "æ¯å¤©åœ¨å®¶é‡Œå¿™ç€åšå®¶åŠ¡", correct: false, feedback: "è¿™æ˜¯å¿™ç¢Œã€‚" },
                    { text: "å‹è°Šæ°¸è¿œä¸ä¼šæ”¹å˜", correct: false, feedback: "è¿™æ˜¯æ’ä¹…ã€‚" }
                ]
            },
            {
                id: 7,
                question: "å½“åˆ«äººé‡åˆ°å›°éš¾æƒ³æ”¾å¼ƒæ—¶ï¼Œä½ å¯¹ä»–è¯´â€œåŠ æ²¹â€ï¼Œè¿™æ˜¯ä¸€ç§ï¼š",
                options: [
                    { text: "é¼“åŠ± (Dorongan)", correct: true, feedback: "æ­£ç¡®ï¼ç»™äºˆåŠ¨åŠ›å°±æ˜¯é¼“åŠ±ã€‚" },
                    { text: "æ„Ÿå¹ (Mengeluh)", correct: false, feedback: "æ„Ÿå¹é€šå¸¸æ˜¯å¹æ°”ã€‚" },
                    { text: "ä»“åº“ (Gudang)", correct: false, feedback: "æ— å…³ã€‚" }
                ]
            },
            {
                id: 8,
                question: "â€œæ’ä¹… (Abadi)â€ è¿™ä¸ªè¯é€šå¸¸å½¢å®¹ä»€ä¹ˆï¼Ÿ",
                options: [
                    { text: "å¿ƒé‡Œéå¸¸æ¸´æœ›å¾—åˆ°æŸä¸ªä¸œè¥¿", correct: false, feedback: "è¿™æ˜¯æœŸç›¼ã€‚" },
                    { text: "æ°¸è¿œä¸å˜ï¼ŒæŒç»­å¾ˆé•¿æ—¶é—´", correct: true, feedback: "æ­£ç¡®ï¼æ’ä¹…å³æ°¸æ’ã€‚" },
                    { text: "å„ç§å„æ ·çš„å‘³é“", correct: false, feedback: "è¿™æ˜¯æ»‹å‘³ã€‚" }
                ]
            },
            {
                id: 9,
                question: "çœ‹åˆ°ç¾ä¸½çš„é£æ™¯ï¼Œä½ å¿ä¸ä½å‘å‡ºèµç¾ï¼Œæˆ–è€…é‡åˆ°ä¸å¦‚æ„çš„äº‹å‘å‡ºå¹æ¯ï¼Œè¿™å«ï¼š",
                options: [
                    { text: "æ„Ÿå¹ (Mengeluh)", correct: true, feedback: "æ­£ç¡®ï¼æœ‰æ„Ÿè€Œå‘ã€‚" },
                    { text: "ä¸¥å‰ (Tegas)", correct: false, feedback: "æ— å…³ã€‚" },
                    { text: "è£¹ (Balut)", correct: false, feedback: "æ— å…³ã€‚" }
                ]
            },
            {
                id: 10,
                question: "åœ¨å¥å­â€œä»–å¿™å¾—ï¼ˆ ï¼‰ä¸€åªä¸åœæ—‹è½¬çš„å°é™€èºâ€ä¸­ï¼Œç©ºæ ¼å¤„å¡«å…¥å“ªä¸ªå­—æœ€åˆé€‚ï¼Ÿ",
                options: [
                    { text: "ä¼¼ (Macam)", correct: true, feedback: "æ­£ç¡®ï¼è¡¨ç¤ºæ¯”å–»ï¼Œâ€œåƒ...ä¸€æ ·â€ã€‚" },
                    { text: "æ»‹å‘³ (Rasa)", correct: false, feedback: "ä¸é€šé¡ºã€‚" },
                    { text: "æœŸç›¼ (Mengharapkan)", correct: false, feedback: "ä¸é€šé¡ºã€‚" }
                ]
            }
        ];

        // --- STATE ---
        let currentTab = 'learn';
        let currentQuizIndex = 0;
        let quizScore = 0;
        let selectedMatchFirst = null;
        let matchPairsFound = 0;
        let resultChart = null;

        // --- INIT ---
        window.onload = function() {
            renderFlashcards();
            initMatchGame();
        };

        // --- NAVIGATION ---
        function switchTab(tab) {
            // Hide all
            document.getElementById('view-learn').classList.add('hidden');
            document.getElementById('view-quiz').classList.add('hidden');
            document.getElementById('view-match').classList.add('hidden');
            
            // Remove active style from nav
            document.getElementById('nav-learn').className = "inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 transition-colors hover:text-amber-600";
            document.getElementById('nav-quiz').className = "inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 transition-colors hover:text-amber-600";
            document.getElementById('nav-match').className = "inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 transition-colors hover:text-amber-600";

            // Show selected
            document.getElementById(`view-${tab}`).classList.remove('hidden');
            document.getElementById(`nav-${tab}`).className = "nav-active inline-flex items-center px-1 pt-1 text-sm font-medium transition-colors hover:text-amber-600";

            currentTab = tab;
            
            if(tab === 'quiz' && currentQuizIndex === 0) {
                renderQuestion();
            }
        }

        // --- FLASHCARDS LOGIC ---
        function renderFlashcards() {
            const container = document.getElementById('flashcard-grid');
            container.innerHTML = '';
            
            vocabData.forEach(word => {
                const card = document.createElement('div');
                card.className = 'card-flip h-48 w-full';
                card.innerHTML = `
                    <div class="card-inner" onclick="this.parentElement.classList.toggle('flipped')">
                        <div class="card-front">
                            <h3 class="text-3xl font-bold text-gray-800">${word.zh}</h3>
                            <p class="text-xs text-gray-400 mt-2">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</p>
                        </div>
                        <div class="card-back p-4">
                            <div class="text-xs font-bold text-amber-600 uppercase tracking-widest mb-1">${word.ms}</div>
                            <p class="text-sm text-gray-800 font-medium mb-2 leading-snug">${word.desc}</p>
                            <div class="mt-auto pt-2 border-t border-amber-200 w-full">
                                <span class="text-xs text-gray-500">æç¤º: ${word.hint}</span>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- QUIZ LOGIC ---
        function renderQuestion() {
            if (currentQuizIndex >= quizData.length) {
                showResults();
                return;
            }

            const q = quizData[currentQuizIndex];
            
            // Hide feedback, show options
            document.getElementById('quiz-feedback').classList.add('hidden');
            document.getElementById('quiz-card').classList.remove('hidden');
            document.getElementById('quiz-results').classList.add('hidden');

            document.getElementById('quiz-progress').innerText = `é¢˜ç›® ${currentQuizIndex + 1} / ${quizData.length}`;
            document.getElementById('quiz-question').innerText = q.question;

            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';

            // Shuffle options slightly or keep fixed? Keeping fixed for stability based on JSON order
            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-amber-50 hover:border-amber-300 transition-all flex items-center group";
                btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 flex items-center justify-center mr-4 group-hover:bg-amber-200 group-hover:text-amber-800 font-bold">${String.fromCharCode(65 + idx)}</span>
                    <span class="text-gray-700 font-medium">${opt.text}</span>
                `;
                btn.onclick = () => checkAnswer(opt, idx);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedOpt, idx) {
            const feedbackPanel = document.getElementById('quiz-feedback');
            const feedbackContent = document.getElementById('feedback-content');
            
            // Disable all buttons
            const buttons = document.getElementById('quiz-options').children;
            for(let btn of buttons) {
                btn.disabled = true;
                btn.classList.add('opacity-60', 'cursor-not-allowed');
            }

            // Highlight selected
            if (selectedOpt.correct) {
                buttons[idx].classList.remove('border-gray-200', 'hover:bg-amber-50');
                buttons[idx].classList.add('bg-green-100', 'border-green-500');
                feedbackContent.innerHTML = `<span class="text-green-700 font-bold block mb-1">å›ç­”æ­£ç¡®ï¼ğŸ‰</span> ${selectedOpt.feedback}`;
                quizScore++;
            } else {
                buttons[idx].classList.remove('border-gray-200', 'hover:bg-amber-50');
                buttons[idx].classList.add('bg-red-100', 'border-red-500');
                feedbackContent.innerHTML = `<span class="text-red-700 font-bold block mb-1">å›ç­”é”™è¯¯</span> ${selectedOpt.feedback}`;
            }

            feedbackPanel.classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuizIndex++;
            renderQuestion();
        }

        function showResults() {
            document.getElementById('quiz-card').classList.add('hidden');
            document.getElementById('quiz-results').classList.remove('hidden');
            document.getElementById('score-text').innerText = `æœ€ç»ˆå¾—åˆ†ï¼š${quizScore} / ${quizData.length}`;

            const ctx = document.getElementById('resultsChart').getContext('2d');
            
            if (resultChart) {
                resultChart.destroy();
            }

            resultChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['æ­£ç¡®', 'é”™è¯¯'],
                    datasets: [{
                        data: [quizScore, quizData.length - quizScore],
                        backgroundColor: ['#10b981', '#ef4444'], // Emerald-500, Red-500
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function resetQuiz() {
            currentQuizIndex = 0;
            quizScore = 0;
            renderQuestion();
        }

        // --- MATCH GAME LOGIC ---
        function initMatchGame() {
            const leftCol = document.getElementById('col-left');
            const rightCol = document.getElementById('col-right');
            const successMsg = document.getElementById('match-success');
            
            leftCol.innerHTML = '';
            rightCol.innerHTML = '';
            successMsg.classList.add('hidden');
            
            // Reset state
            selectedMatchFirst = null;
            matchPairsFound = 0;
            document.getElementById('match-score').innerText = `åŒ¹é…ç»„æ•°ï¼š0 / 5`;

            // Select 5 random words for the game
            const gameWords = [...vocabData].sort(() => 0.5 - Math.random()).slice(0, 5);
            
            // Create Left Items (Chinese)
            gameWords.forEach(word => {
                const item = createMatchItem(word.id, word.zh, 'left');
                leftCol.appendChild(item);
            });

            // Create Right Items (Malay + Def), shuffled
            const rightItems = [...gameWords].sort(() => 0.5 - Math.random());
            rightItems.forEach(word => {
                const item = createMatchItem(word.id, `${word.ms} - ${word.desc.substring(0, 10)}...`, 'right');
                rightCol.appendChild(item);
            });
        }

        function createMatchItem(id, text, side) {
            const div = document.createElement('div');
            div.className = "p-4 bg-white border-2 border-gray-200 rounded-lg cursor-pointer hover:border-emerald-300 transition-all select-none text-center shadow-sm h-20 flex items-center justify-center font-medium";
            div.innerText = text;
            div.dataset.id = id;
            div.dataset.side = side;
            
            div.onclick = () => handleMatchClick(div);
            return div;
        }

        function handleMatchClick(el) {
            if (el.classList.contains('bg-gray-100')) return; // Already matched
            
            // If nothing selected yet
            if (!selectedMatchFirst) {
                selectedMatchFirst = el;
                el.classList.add('border-emerald-500', 'bg-emerald-50');
                return;
            }

            // If clicking the same item (deselect)
            if (selectedMatchFirst === el) {
                el.classList.remove('border-emerald-500', 'bg-emerald-50');
                selectedMatchFirst = null;
                return;
            }

            // If clicking same side (switch selection)
            if (selectedMatchFirst.dataset.side === el.dataset.side) {
                selectedMatchFirst.classList.remove('border-emerald-500', 'bg-emerald-50');
                selectedMatchFirst = el;
                el.classList.add('border-emerald-500', 'bg-emerald-50');
                return;
            }

            // Check Match
            if (selectedMatchFirst.dataset.id === el.dataset.id) {
                // Match Found
                markMatched(selectedMatchFirst);
                markMatched(el);
                selectedMatchFirst = null;
                matchPairsFound++;
                document.getElementById('match-score').innerText = `åŒ¹é…ç»„æ•°ï¼š${matchPairsFound} / 5`;
                
                if (matchPairsFound === 5) {
                    document.getElementById('match-success').classList.remove('hidden');
                }
            } else {
                // Wrong Match - Visual shake or red
                el.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => {
                    selectedMatchFirst.classList.remove('border-emerald-500', 'bg-emerald-50');
                    el.classList.remove('border-red-500', 'bg-red-50');
                    selectedMatchFirst = null;
                }, 500);
            }
        }

        function markMatched(el) {
            el.classList.remove('border-emerald-500', 'bg-emerald-50', 'hover:border-emerald-300', 'cursor-pointer');
            el.classList.add('bg-gray-100', 'text-gray-400', 'border-gray-100');
            el.onclick = null;
        }

    </script>
</body>
</html>
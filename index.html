<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•å…ƒäºŒï¼šèµ°å…¥å‘æ˜ä¸–ç•Œ - äº’åŠ¨å­¦ä¹ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f0f9ff; }
        .tab-active { border-bottom: 4px solid #0284c7; color: #0284c7; font-weight: bold; }
        .card-inner { transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; position: relative; }
        .flipped { transform: rotateY(180deg); }
        .card-face { backface-visibility: hidden; display: flex; align-items: center; justify-content: center; flex-direction: column; border-radius: 1rem; position: absolute; width: 100%; height: 100%; }
        .card-back { transform: rotateY(180deg); background-color: #f0f9ff; border: 2px solid #7dd3fc; }
    </style>
</head>
<body class="p-0 m-0">

    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-6 flex justify-between items-center h-16">
            <div class="flex items-center space-x-2">
                <a href="index.html" class="text-gray-400 hover:text-blue-600">ğŸ  é¦–é¡µ</a>
                <span class="text-gray-300">/</span>
                <h1 class="text-lg font-bold text-blue-600">å•å…ƒäºŒ</h1>
            </div>
            <div class="flex space-x-2 sm:space-x-4 h-full">
                <button onclick="showTab('learn')" id="tab-learn" class="tab-active px-2 h-full text-xs sm:text-base">è¯è¯­å­¦ä¹ </button>
                <button onclick="showTab('quiz')" id="tab-quiz" class="px-2 h-full text-gray-500 text-xs sm:text-base">ç”Ÿå­—ç»ƒä¹ </button>
                <button onclick="showTab('match')" id="tab-match" class="px-2 h-full text-gray-500 text-xs sm:text-base">è¿çº¿æ¸¸æˆ</button>
                <button onclick="showTab('resource')" id="tab-resource" class="px-2 h-full text-gray-500 text-xs sm:text-base">èµ„æ–™ä¸‹è½½</button>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto p-6">
        
        <!-- 1. è¯è¯­å­¦ä¹ æ¨¡å— -->
        <section id="view-learn" class="space-y-6">
            <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500 mb-6">
                <p class="text-blue-800 font-medium text-sm sm:text-base">ğŸ’¡ ç‚¹å‡»ä¸‹æ–¹å¡ç‰‡ï¼ŒæŸ¥çœ‹å‘æ˜å®¶ä»¬çš„è¯è¯­ç§˜å¯†ï¼</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="card-grid"></div>
        </section>

        <!-- 2. ç”Ÿå­—ç»ƒä¹ æ¨¡å— -->
        <section id="view-quiz" class="hidden max-w-2xl mx-auto">
            <div id="quiz-container" class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl border border-gray-100">
                <div class="flex justify-between mb-4 text-xs font-bold text-gray-400">
                    <span id="q-progress">é¢˜ç›® 1/5</span>
                    <span id="q-score">å¾—åˆ†: 0</span>
                </div>
                <h2 id="q-text" class="text-lg font-bold mb-6 text-gray-800">åŠ è½½ä¸­...</h2>
                <div id="q-options" class="space-y-3"></div>
                <div id="q-feedback" class="hidden mt-6 p-4 rounded-lg"></div>
                <button id="btn-next" onclick="nextQuestion()" class="hidden mt-6 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700">ä¸‹ä¸€é¢˜</button>
            </div>
            <div id="quiz-result" class="hidden bg-white p-8 rounded-2xl shadow-xl text-center">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">æŒ‘æˆ˜å®Œæˆï¼</h2>
                <div style="height: 250px; width: 100%; max-width: 300px; margin: 0 auto;" class="relative mb-6">
                    <canvas id="resultChart"></canvas>
                </div>
                <button onclick="resetQuiz()" class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700">å†è¯•ä¸€æ¬¡</button>
            </div>
        </section>

        <!-- 3. è¿çº¿æ¸¸æˆæ¨¡å— -->
        <section id="view-match" class="hidden">
            <div class="flex flex-col md:flex-row justify-between items-start space-y-6 md:space-y-0 md:space-x-6 max-w-4xl mx-auto">
                <div id="match-zh" class="flex flex-col space-y-3 w-full md:w-1/3"></div>
                <div id="match-desc" class="flex flex-col space-y-3 w-full md:w-3/5"></div>
            </div>
            <div id="match-win" class="hidden mt-12 text-center">
                <h3 class="text-xl font-bold text-emerald-600">ğŸ‰ å…¨å¯¹ï¼ä½ å¤ªæ£’äº†ï¼</h3>
                <button onclick="initMatchGame()" class="mt-4 text-blue-600 underline">é‡æ–°å¼€å§‹</button>
            </div>
        </section>

        <!-- 4. èµ„æ–™ä¸‹è½½æ¨¡å— (ä¼˜åŒ–ï¼šæ”¯æŒå¤šä¸ªPDF) -->
        <section id="view-resource" class="hidden">
            <div class="max-w-4xl mx-auto">
                <div class="bg-white p-8 rounded-2xl shadow-md text-center mb-8">
                    <div class="text-5xl mb-4">ğŸ“š</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">å­¦ä¹ èµ„æºåº“</h2>
                    <p class="text-gray-500">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æŸ¥çœ‹æˆ–ä¸‹è½½å¯¹åº”çš„ PDF èµ„æ–™ã€‚</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="resource-list">
                    <!-- è¿™é‡Œçš„å†…å®¹ç”± JavaScript è‡ªåŠ¨ç”Ÿæˆ -->
                </div>
            </div>
        </section>

    </main>

    <script>
        // ã€æ ¸å¿ƒæ•°æ®åŒºï¼šè¯è¯­å†…å®¹ã€‘
        const data = [
            { zh: "è´¡çŒ®", ms: "Sumbangan", desc: "å¯¹å›½å®¶æˆ–å…¬ä¼—æ‰€åšçš„æœ‰ç›Šçš„äº‹", tip: "ç§‘å­¦å®¶çš„è´¡çŒ®" },
            { zh: "è¯ç”Ÿ", ms: "Lahir", desc: "å‡ºç”Ÿï¼Œæˆ–ä¸€ä¸ªæ–°äº‹ç‰©çš„äº§ç”Ÿ", tip: "æ–°å‘æ˜çš„è¯ç”Ÿ" },
            { zh: "çµæ„Ÿ", ms: "Inspirasi", desc: "çªç„¶å‡ºç°çš„å¥½çš„æƒ³æ³•æˆ–åˆ›æ„", tip: "åˆ›ä½œçš„çµæ„Ÿ" },
            { zh: "å®éªŒ", ms: "Eksperimen", desc: "ä¸ºäº†æ£€éªŒæƒ³æ³•è€Œè¿›è¡Œçš„å®é™…æ“ä½œ", tip: "ç§‘å­¦å®éªŒ" },
            { zh: "å¤±è´¥", ms: "Gagal", desc: "æ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„ç›®çš„", tip: "å¤±è´¥ä¹ƒæˆåŠŸä¹‹æ¯" },
            { zh: "æ”¹è‰¯", ms: "Menambah baik", desc: "å»æ‰ç¼ºç‚¹ï¼Œä½¿äº‹ç‰©å˜å¾—æ›´å¥½", tip: "æ”¹è‰¯å“ç§" }
        ];

        // ã€æ ¸å¿ƒæ•°æ®åŒºï¼šPDF åˆ—è¡¨ã€‘
        // ä½ å¯ä»¥åœ¨è¿™é‡Œå¢åŠ æ— é™ä¸ª PDF æ–‡ä»¶
        const pdfFiles = [
            { title: "å•å…ƒäºŒï¼šé‡ç‚¹ç¬”è®°ä¸ç”Ÿå­—è¡¨", fileName: "unit2_notes.pdf", type: "ç¬”è®°" },
            { title: "å•å…ƒäºŒï¼šè¯¾åå·©å›ºç»ƒä¹ é¢˜", fileName: "unit2_exercise.pdf", type: "ç»ƒä¹ " },
            { title: "å•å…ƒäºŒï¼šé¢å¤–è¡¥å……é˜…è¯»ææ–™", fileName: "unit2_extra.pdf", type: "é˜…è¯»" },
            { title: "å•å…ƒäºŒï¼šå¬å†™åˆ—è¡¨", fileName: "unit2_spelling.pdf", type: "æµ‹è¯•" }
        ];

        let currentQuizIndex = 0;
        let score = 0;
        let chart = null;
        let matchSelected = null;
        let matchCount = 0;

        window.onload = () => {
            renderCards();
            initQuiz();
            initMatchGame();
            renderResources();
        };

        function showTab(tab) {
            ['learn', 'quiz', 'match', 'resource'].forEach(t => {
                document.getElementById('view-' + t).classList.add('hidden');
                document.getElementById('tab-' + t).className = "px-2 h-full text-gray-500 text-xs sm:text-base";
            });
            document.getElementById('view-' + tab).classList.remove('hidden');
            document.getElementById('tab-' + tab).className = "tab-active px-2 h-full text-xs sm:text-base";
        }

        // æ¸²æŸ“ PDF ä¸‹è½½åˆ—è¡¨
        function renderResources() {
            const container = document.getElementById('resource-list');
            container.innerHTML = pdfFiles.map(file => `
                <a href="${file.fileName}" target="_blank" class="flex items-center p-4 bg-white border border-gray-100 rounded-xl hover:shadow-md hover:border-blue-200 transition-all group">
                    <div class="w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center text-red-500 mr-4 group-hover:bg-red-500 group-hover:text-white transition-colors">
                        <span class="font-bold text-xs uppercase">PDF</span>
                    </div>
                    <div class="flex-grow">
                        <div class="text-xs font-bold text-blue-500 mb-1">${file.type}</div>
                        <div class="text-sm font-bold text-gray-700">${file.title}</div>
                    </div>
                    <div class="text-gray-300 group-hover:text-blue-500">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </div>
                </a>
            `).join('');
        }

        function renderCards() {
            const grid = document.getElementById('card-grid');
            grid.innerHTML = data.map(item => `
                <div class="h-44 relative card-flip" onclick="this.querySelector('.card-inner').classList.toggle('flipped')">
                    <div class="card-inner w-full h-full">
                        <div class="card-face bg-white shadow-md border border-gray-100">
                            <span class="text-2xl font-bold text-gray-800">${item.zh}</span>
                            <span class="text-sm text-blue-500 mt-2">${item.ms}</span>
                        </div>
                        <div class="card-face card-back p-4 text-center">
                            <p class="text-sm font-bold text-gray-700 mb-2">${item.desc}</p>
                            <p class="text-xs text-gray-400 italic">ä¾‹ï¼š${item.tip}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function initQuiz() {
            currentQuizIndex = 0;
            score = 0;
            showQuestion();
        }

        function showQuestion() {
            const q = data[currentQuizIndex];
            document.getElementById('q-progress').innerText = `é¢˜ç›® ${currentQuizIndex + 1}/${data.length}`;
            document.getElementById('q-text').innerText = `â€œ${q.zh} (${q.ms})â€ çš„æ„æ€æ˜¯ï¼Ÿ`;
            const options = [q.desc];
            while(options.length < 3) {
                let r = data[Math.floor(Math.random()*data.length)].desc;
                if(!options.includes(r)) options.push(r);
            }
            options.sort(() => Math.random() - 0.5);
            document.getElementById('q-options').innerHTML = options.map(opt => `
                <button onclick="checkAnswer('${opt}', '${q.desc}')" class="w-full text-left p-4 rounded-xl border-2 border-gray-100 hover:border-blue-300 hover:bg-blue-50 transition-all text-sm">
                    ${opt}
                </button>
            `).join('');
            document.getElementById('q-feedback').classList.add('hidden');
            document.getElementById('btn-next').classList.add('hidden');
        }

        function checkAnswer(selected, correct) {
            const f = document.getElementById('q-feedback');
            f.classList.remove('hidden');
            if(selected === correct) {
                score++;
                f.className = "mt-6 p-4 rounded-lg bg-emerald-100 text-emerald-800 font-bold text-sm";
                f.innerText = "ç­”å¯¹äº†ï¼âœ¨";
            } else {
                f.className = "mt-6 p-4 rounded-lg bg-red-100 text-red-800 font-bold text-sm";
                f.innerText = "ç­”é”™äº†ï¼Œæ­£ç¡®æ„æ€æ˜¯ï¼š" + correct;
            }
            document.querySelectorAll('#q-options button').forEach(b => b.disabled = true);
            document.getElementById('btn-next').classList.remove('hidden');
            document.getElementById('q-score').innerText = `å¾—åˆ†: ${score}`;
        }

        function nextQuestion() {
            currentQuizIndex++;
            if(currentQuizIndex < data.length) showQuestion();
            else showFinalResult();
        }

        function showFinalResult() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('quiz-result').classList.remove('hidden');
            const ctx = document.getElementById('resultChart').getContext('2d');
            if(chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['æ­£ç¡®', 'é”™è¯¯'],
                    datasets: [{
                        data: [score, data.length - score],
                        backgroundColor: ['#10b981', '#f43f5e']
                    }]
                }
            });
        }

        function resetQuiz() {
            document.getElementById('quiz-container').classList.remove('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            initQuiz();
        }

        function initMatchGame() {
            matchCount = 0;
            matchSelected = null;
            document.getElementById('match-win').classList.add('hidden');
            const sessionData = [...data].sort(() => Math.random() - 0.5).slice(0, 5);
            const zhList = [...sessionData].sort(() => Math.random() - 0.5);
            const descList = [...sessionData].sort(() => Math.random() - 0.5);

            document.getElementById('match-zh').innerHTML = zhList.map(item => `
                <button data-id="${item.zh}" onclick="handleMatch(this, 'zh')" class="p-4 bg-white border-2 border-gray-200 rounded-xl hover:shadow-md font-bold text-gray-800">${item.zh}</button>
            `).join('');
            document.getElementById('match-desc').innerHTML = descList.map(item => `
                <button data-id="${item.zh}" onclick="handleMatch(this, 'desc')" class="p-3 bg-white border-2 border-gray-200 rounded-xl hover:shadow-md text-xs text-left text-gray-600 h-full flex items-center">${item.desc}</button>
            `).join('');
        }

        function handleMatch(el, type) {
            if(el.classList.contains('bg-emerald-500')) return;
            if(!matchSelected) {
                matchSelected = { el, type, id: el.dataset.id };
                el.classList.add('border-blue-500', 'bg-blue-50');
            } else {
                if(matchSelected.type !== type && matchSelected.id === el.dataset.id) {
                    el.className = "p-3 bg-emerald-500 text-white rounded-xl font-bold opacity-50 flex items-center";
                    matchSelected.el.className = "p-4 bg-emerald-500 text-white rounded-xl font-bold opacity-50 flex items-center justify-center";
                    matchCount++;
                    if(matchCount === 5) document.getElementById('match-win').classList.remove('hidden');
                    matchSelected = null;
                } else {
                    matchSelected.el.classList.remove('border-blue-500', 'bg-blue-50');
                    matchSelected = null;
                    handleMatch(el, type);
                }
            }
        }
    </script>
</body>
</html>
